<html lang="ca">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

        <!-- Bootstrap CSS CDN -->
        <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
            crossorigin="anonymous"
        />
        <!--font family-->
        <link
            href="https://fonts.googleapis.com/css2?family=Martel+Sans:wght@200;300;400&display=swap"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        />
        <link rel="stylesheet" href="css/styles.css" />
    </head>

    <body>
        <nav class="navbar bg-info navbar-dark navbar-expand-SM">
            <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#myNav"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
            <a href="index.html" class="navbar-brand">
                <img src="./img/logo.png" width="78" heigth="69"
            /></a>
            <div class="collapse navbar-collapse" id="myNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a href="./design_page.html" class="nav-link">dissenyar el lloc</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a href="./languages_page.html" class="nav-link dropdown-toggle"
                            >escriure el codi</a
                        >
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="html.html">HTML</a>
                            <a class="dropdown-item" href="css.html">CSS</a>
                            <a class="dropdown-item" href="javascript.html">Javascript</a>
                        </div>
                    </li>

                    <li class="nav-item">
                        <a href="./bundlers_page.html" class="nav-link">preparar la distribució</a>
                    </li>
                    <li class="nav-item">
                        <a href="./hosting_page.html" class="nav-link">publicar el meu lloc web</a>
                    </li>
                    <li class="nav-item active">
                        <a href="./doc_pac1.html" class="nav-link">documentació PAC1</a>
                    </li>
                </ul>
            </div>
        </nav>

        <header class="headerMain">
            <div class="container h-300"></div>
        </header>

        <div class="container">
            <h3>El contingut del lloc web</h3>
            <p>
                El lloc web està orientat a mode de tutorial per ser coherent, d'una banda, amb
                l'estructura que es demanava a l'enunciat i per a que alhora serveixi de
                documentació de la PAC, per tant pregaria al corrector que llegeixi atentament la
                web i prengui en compte el seu contingut com a part integrant de la documentació de
                la PAC1. Tot i que pot semblar una mica llarg, m'ha semblat la manera més
                interessant de demostrar la meva comprensió de les eines i puc assegurar que és una
                forma bastant més elaborada d'omplir les pàgines amb contingut que l'alternativa de
                copiar informació d'altres llocs web. Si a més, aquest lloc pot servir a algú altre
                per entendre què cal per desenvolupar un lloc web, el meu esforç haurà valgut la
                pena.
            </p>

            <h3>Bootstrap</h3>
            <p>
                M'he permès fer servir Bootstrap en contra de la recomanació del professor per la
                simple raó de que és el primer cop que tinc contacte amb aquest framework i per tant
                no m'he limitat a escollir la manera més simple de desenvolupar el lloc. De fet,
                m'he documentat seguint el tutorial
                <a href="https://learning.oreilly.com/api/v1/dashboard/continue/9781789808179/"
                    >"Bootstrap 4 for Beginners - Build 5 Websites from Scratch"</a
                >, el qual, no puc més que recomanar
            </p>
            <h3>El boilerplate</h3>
            <p>
                Segons la meva comprensió de l'enunciat, aquesta era la part de la pràctica on
                s'esperava més creativitat per part nostra, tot i que gran part de les eines que
                havíem de fer servir ens venien donades per la feina prèvia del M2: el gestor de
                paquets havia de ser <a href="https://www.npmjs.com">npm</a>, el
                <i>package bundler</i> hava de ser <a href="https://parceljs.org">parcel</a>, teníem
                certa llibertat per escollir el tipus de repositori git, tot i que les eines
                proposades <a href="https://github.com">gitHub</a> i
                <a href="https://gitlab.com">gitLab</a> són bastant equivalents i, finalment, la
                publicació del lloc s'havia de fer a <a href="https://www.netlify.com">netlify</a>.
                Total que amb tanta "recomanació", era difícil trobar com afegir-li valor al
                boilerplate i més, amb una aplicació tan simple com la que estem desenvolupant on el
                codi Javascript és merament testimonial i no dona peu a l'execució de massa proves.
            </p>
            <p>
                Donant-li moltes voltes al tema em va semblar una bona idea automatitzar la
                verificació del codi i la publicació del lloc i això és el que he fet.
            </p>
            <p>
                Primer de tot analitzaré quins paquets de software he integrat al boilerplate i per
                això, res millor que repassar els tags <i>dependencies</i> i
                <i>devDependencies</i> del meu fitxer <i>package.json</i>:
            </p>
            <div class="jumbotron jumbotron-code rounded-0">
                <pre><code>
"devDependencies": {
    "@commitlint/cli": "^8.3.5",
    "@commitlint/config-conventional": "^8.3.4",
    "autoprefixer": "^9.7.5",
    "commitizen": "^4.0.4",
    "cssnano": "^4.1.10",
    "eslint": "^6.8.0",
    "eslint-config-google": "^0.14.0",
    "husky": "^4.2.3",
    "lint-staged": "^10.1.3",
    "npm-run-all": "^4.1.5",
    "parcel-plugin-imagemin": "^4.0.1",
    "prettier": "^2.0.4",
    "rimraf": "^3.0.2",
    "standard-version": "^7.1.0"
    },
    "dependencies": {
    "bootstrap": "^4.4.1",
    "jquery": "^3.4.1",
    "popper.js": "^1.16.1"
    }
</code></pre>
            </div>
            <ul class="list-group">
                <li class="list list-group-item list-group-item-yellow">
                    <p>
                        La integració de <a href="https://getbootstrap.com">bootstrap</a> es fa
                        principalment cridant al seu CDN, aquest és també el cas de les llibreries
                        <a href="https://jquery.com">jquery</a> i
                        <a href="https://popper.js.org">popper</a> de les que depèn. No obstant,
                        també incloem els fitxers <i>css</i> i <i>js</i> d'aquestes llibreries sota
                        el directori <i>lib</i> per tal de tenir un <i>local fallback</i> o solució
                        d'emergència en cas que el CDN estigui caigut. Així, al <i>head</i> de cada
                        pàgina s'afegeixen enllaços a
                        <i>stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css</i> i al
                        final del <i>body</i> d'altres que apunten cap als mòduls javascript dels
                        tres paquets. Acte seguit he afegit el codi següent:
                    </p>
                    <div class="jumbotron jumbotron-code rounded-0">
                        <pre><code>
        &lt;script&gt;
            if (typeof $.fn.modal === 'undefined') {
                document.write('&lt;script src="lib/bootstrap/js/bootstrap.min.js">&lt;\/script&gt;');
                $('head').prepend(
                    '&lt;link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css"&gt;'
                );
            }
        &lt;/script&gt;
                    </code></pre>
                    </div>
                    <p>
                        Aquest codi detecta si <a href="https://getbootstrap.com">bootstrap</a> s'ha
                        carregat correctament i, si no és el cas, carrega la llibreria
                        <i>javascript</i> del <i>boilerplate</i> local i afegeix el fitxer
                        <i>css</i> al <i>head</i> de la pàgina.
                    </p>
                </li>
                <li class="list list-group-item list-group-item-yellow">
                    <p>
                        L'ús de
                        <a href="https://github.com/postcss/autoprefixer"
                            >postcss/autoprefixer/cssnano</a
                        >, de <a href="https://www.npmjs.com/package/npm-run-all">npm-run-all</a> ,
                        de <a href="https://parceljs.org">parcel</a> i de
                        <a href="https://www.npmjs.com/package/rimraf">rimraf</a> està ja explicat
                        al M2. Aquests mòduls estan configurats tal i com s'explica també en el seu
                        enunciat.
                    </p>
                </li>
                <li class="list list-group-item list-group-item-yellow">
                    <p>
                        <a href="https://github.com/imagemin/imagemin">imagemin</a> és un plugin per
                        a Parcel que permet comprimir les imatges que s'integren al lloc web abans
                        d'empaquetar-les.
                    </p>
                </li>
                <li class="list list-group-item list-group-item-yellow">
                    <p>
                        <a href="https://eslint.org">eslint</a> i
                        <a href="https://www.npmjs.com/package/lint-staged?activeTab=dependencies"
                            >lint-staged</a
                        >
                        són llibreries per a verificar la sintaxi del codi <i>javascript</i>. Faig
                        servir la plantilla de google <i>eslint-config-google</i> com a referència
                        de sintaxi correcta.
                    </p>
                </li>
                <li class="list list-group-item list-group-item-yellow">
                    <p>
                        Per a verificar la sintaxi dels fitxers <i>html</i> i <i>css</i> faig servir
                        l'eina <a href="https://prettier.io">prettier</a>. Aquesta eina permet
                        igualment millorar l'aspecte del codi en base a unes regles que es
                        defineixen al seu fitxer de configuració <i>.prettierrc.json</i>
                    </p>
                </li>
                <li class="list list-group-item list-group-item-yellow">
                    <p>
                        Finalment, per a publicar el lloc, faig servir les llibreries
                        <a href="https://commitlint.js.org/#/">commitlint</a>,
                        <a href="https://github.com/commitizen/cz-cli">commitizen</a>i
                        <a href="https://www.npmjs.com/package/husky">husky</a> les quals,
                        combinades, permeten automatitzar les operacions de <i>commit</i> a
                        <i>git</i> tot i garantint que el desenvolupador
                        <cite>AKA known as myself</cite>
                        afegeix un missatge amb un format determinat. Finalment, la llibreria
                        <a href="https://www.npmjs.com/package/standard-version"
                            >standard-version</a
                        >
                        crea un fitxer de <i>release</i> a partir de les informacions que s'han
                        aportat als missatges de <i>commit</i>.
                    </p>
                </li>
            </ul>

            <h3>L'automatització del lloc Web</h3>
            <p>
                En aquesta secció documentaré la manera com s'han integrat les eines citades
                prèviament al boilerplate, de nou ho faré repassant el contingut del fitxer
                <i>package.json</i> i, més en particular, la seva secció de definició de scripts
            </p>
            <div class="jumbotron jumbotron-code rounded-0">
                <pre><code>
    "scripts": {
        "commit": "git-cz",
        "test": "echo \"Error: no test specified\" && exit 1",
        "dev": "npm-run-all clean lint parcel:dev",
        "build": "npm-run-all clean prettier:fix parcel:build",
        "lint": "eslint --fix js/*.js ",
        "prettier:fix": "prettier --write \"{css/*.css,*.html}\"",
        "prettier:check": "prettier --check \"{css/*.css,*.html}\"",
        "prerelease": "git add css/*.css *.html js/*.js img/*.* .*.json package.json",
        "parcel:dev": "parcel index.html languages_page.html ",
        "parcel:build": "npx -p parcel-bundler parcel build index.html languages_page.html",
        "clean": "rimraf dist .cache .cache-loader",
        "release": "standard-version -a",
        "postrelease": "run-s release:*",
        "release:tags": "git push --follow-tags origin master"
    },
    "config": {
        "commitizen": {
            "path": "cz-conventional-changelog"
        }
    },
    "husky": {
        "hooks": {
          "pre-commit": "npm run lint && npm run prettier:fix && npm run prerelease",
          "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
        }
    }       
        </code></pre>
            </div>
            <ul class="list-group">
                <li class="list list-group-item list-group-item-yellow">
                    <p>
                        L'<i>script "test"</i> no té cap acció associada, no obstant, aquesta
                        entrada es deixa per convenció ja que és esperada a qualsevol boilerplate
                        implementat amb <i>npm</i>. De fet, genera un missatge d'errada i torna un
                        resultat = 1 que equival a l'execució exitosa de totes les proves,
                        l'objectiu és no bloquejar qualsevol altre script que pugui requerir
                        l'execió p`revia de <i>npm test</i>.
                    </p>
                </li>
                <li class="list list-group-item list-group-item-yellow">
                    <p>
                        A l'<i>script "dev"</i> prèviament configurat al mòdul M2 de l'assignatura,
                        apart d'afegir les pàgines de categoria com a <i>entry files</i> hi he
                        integrat l'execució de <i>eslint</i> en mode <i>fix</i>, el qual verificarà
                        i corregirà la sintaxi dels fitxers javascript. L'execució de
                        <i>prettifier</i> l'he deixada per al <i>build</i> ja que si l'executava en
                        mode "dev", com aquest mode s'activa quan es detecta un canvi en qualsevol
                        fitxer o, en d'altres paraules, cada cop que es grava un canvi, els canvis
                        introduïts per<i>prettifier</i>col·lisionen amb els canvis manuals fruit del
                        procès corrent de desenvolupament i, o es perden els canvis manuals o es
                        perden els canvis de <i>prettifier</i>.
                    </p>
                    <p>
                        A l'<i>script "build"</i> prèviament configurat al mòdul M2 de l'assignatura
                        he afegit, per tant, l'execució de <i>prettifier</i>
                    </p>
                </li>
                <li class="list list-group-item list-group-item-yellow">
                    <p>
                        Finalment, he afegit un seguit de <a>scripts</a> amb l'objectiu de preparar
                        una <i>release</i>. Primerament el desenvolupador
                        <cite>AKA known as myself</cite> ha d'executar l'<i>script "prerelease"</i>,
                        el qual pujarà els canvis al repositori local. Acte seguit procedirà a fer
                        un <i>"run commit"</i> el qual, d'una banda procedirà a interrogar el
                        desenvolupador per tal de crear un missatge de <i>commit</i> complet i
                        tornarà a passar les verificacions de codi (<i>lint-staged</i> i
                        <i>prettyfier</i>)
                    </p>
                </li>

                <li class="list list-group-item list-group-item-yellow"></li>
                <li class="list list-group-item list-group-item-yellow"></li>
            </ul>
        </div>

        <!-- jQuery CDN -->
        <script
            src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"
        ></script>
        <!-- jQuery local fallback -->
        <script>
            window.jQuery || document.write("<script src='lib/jquery/js/jquery.min.js'><\/script>");
        </script>
        <!-- popper CDN-->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"
        ></script>
        <!-- Bootstrap JS CDN -->
        <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"
        ></script>
        <!-- Bootstrap JS local fallback -->
        <script>
            if (typeof $.fn.modal === 'undefined') {
                document.write('<script src="lib/bootstrap/js/bootstrap.min.js"><\/script>');
                $('head').prepend(
                    '<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">'
                );
            }
        </script>
    </body>
</html>
